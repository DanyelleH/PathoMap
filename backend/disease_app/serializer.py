from rest_framework import serializers
from .models import *
from disease_app.models import Disease 
from protein_app.serializer import ProteinSerializer
# disease = {
#     "pk": 33,
#     "disease_name": "Hyperlipoproteinemia 3",
#     "description": "A disorder characterized by the accumulation of intermediate-density lipoprotein particles (IDL or broad-beta-lipoprotein) rich in cholesterol. Clinical features include xanthomas, yellowish lipid deposits in the palmar crease, or less specific on tendons and on elbows. The disorder rarely manifests before the third decade in men. In women, it is usually expressed only after the menopause.",
#     "patient_summary": "What is cholesterol? Cholesterol is a waxy, fat-like substance that's found in all the cells in the body.  The liver makes cholesterol, and it is also in some foods, such as meat and dairy products.  The body needs some cholesterol to work properly.  But if your child or teen has high cholesterol (too much cholesterol in the blood), it can stick to the walls of their arteries and narrow or even block the arteries.  This can put your child or teen at risk of coronary artery disease and other heart diseases. What causes high cholesterol in children and teens? Three main factors contribute to high cholesterol in children and teens: \n\nAn unhealthy diet, especially one that is high in saturated fats, A family history of high cholesterol, especially when one or both parents have high cholesterol, Having obesity, Some diseases, such as diabetes, kidney disease, and certain thyroid diseases, can also cause high cholesterol in children and teens. What are the symptoms of high cholesterol in children and teens? There are usually no signs or symptoms that your child or teen has high cholesterol. How do I know if my child or teen has high cholesterol? There is a blood test to measure cholesterol levels.  The test gives information about: \n\nTotal cholesterol.  This is a measure of the total amount of cholesterol in your blood.  It includes both low-density lipoprotein (LDL) cholesterol and high-density lipoprotein (HDL) cholesterol. LDL cholesterol.  LDL is often called \"bad\" cholesterol because it is the main source of cholesterol buildup and blockage in the arteries. HDL cholesterol.  HDL is often called \"good\" cholesterol because it helps remove cholesterol from your arteries. Non-HDL.  This number is your total cholesterol minus your HDL.  Your non-HDL includes LDL and other types of cholesterol such as VLDL (very-low-density lipoprotein). Triglycerides.  This is another type of fat in your blood that can raise the risk of heart disease. For anyone aged 19 or younger, the healthy levels of cholesterol are, Type of Cholesterol, Healthy Level, Total Cholesterol, Less than 170 mg/d, LNon-HDLLess than 120 mg/d, LLDLLess than 110 mg/d, LHDLMore than 45 mg/d, LWhen and how often your child or teen should get this test depends on their age, risk factors, and family history.  The general recommendations are: \n\nThe first test should be between ages 9 to 11Children should have the test again every 5 years, Some children may have this test starting at age 2 if there is a family history of high cholesterol, heart attack, or stroke, What are the treatments for high cholesterol in children and teens? Lifestyle changes are the main treatment for high cholesterol in children and teens.  These changes include: \n\nBeing more active.  This includes getting regular physical activity and spending less time sitting (in front of a television, at a computer, on a phone or tablet, etc. ). Healthy eating.  A diet to lower cholesterol includes limiting foods that are high in saturated fat, sugar, and cholesterol.  It is also important to eat plenty of fresh fruits, vegetables, and whole grains. Losing weight, if your child or teen is overweight or has obesity. If everyone in the family makes these changes, it will be easier for your child or teen to stick to them.  It is also an opportunity to improve your health, and the health of the rest of your family. Sometimes these lifestyle changes are not enough to lower your child or teen's cholesterol.  Their health care provider may consider giving your child or teen cholesterol medicines if they: \n\nAre at least 10 years old. Have an LDL (bad) cholesterol level that is higher than 190 mg/d, L, even after six months of diet and exercise changes. Have an LDL (bad) cholesterol level that is higher than 160 mg/d, L AND are at high risk for heart disease. Have familial hypercholesterolemia (FH).  FH is an inherited disorder that causes very high levels of cholesterol in the blood. ",
#     "associated_proteins": []
# }

# proteinIn =  {
#         "accession_id": "P02649",
#         "name": "Apolipoprotein E",
#         "function": "APOE is an apolipoprotein, a protein associating with lipid particles, that mainly functions in lipoprotein-mediated lipid transport between organs via the plasma and interstitial fluids (PubMed:14754908, PubMed:1911868, PubMed:6860692). APOE is a core component of plasma lipoproteins and is involved in their production, conversion and clearance (PubMed:14754908, PubMed:1911868, PubMed:1917954, PubMed:23620513, PubMed:2762297, PubMed:6860692, PubMed:9395455). Apolipoproteins are amphipathic molecules that interact both with lipids of the lipoprotein particle core and the aqueous environment of the plasma (PubMed:2762297, PubMed:6860692, PubMed:9395455). As such, APOE associates with chylomicrons, chylomicron remnants, very low density lipoproteins (VLDL) and intermediate density lipoproteins (IDL) but shows a preferential binding to high-density lipoproteins (HDL) (PubMed:1911868, PubMed:6860692). It also binds a wide range of cellular receptors including the LDL receptor/LDLR, the LDL receptor-related proteins LRP1, LRP2 and LRP8 and the very low-density lipoprotein receptor/VLDLR that mediate the cellular uptake of the APOE-containing lipoprotein particles (PubMed:12950167, PubMed:1530612, PubMed:1917954, PubMed:20030366, PubMed:20303980, PubMed:2063194, PubMed:2762297, PubMed:7635945, PubMed:7768901, PubMed:8756331, PubMed:8939961). Finally, APOE has also a heparin-binding activity and binds heparan-sulfate proteoglycans on the surface of cells, a property that supports the capture and the receptor-mediated uptake of APOE-containing lipoproteins by cells (PubMed:23676495, PubMed:7635945, PubMed:9395455, PubMed:9488694). A main function of APOE is to mediate lipoprotein clearance through the uptake of chylomicrons, VLDLs, and HDLs by hepatocytes (PubMed:1911868, PubMed:1917954, PubMed:23676495, PubMed:29516132, PubMed:9395455). APOE is also involved in the biosynthesis by the liver of VLDLs as well as their uptake by peripheral tissues ensuring the delivery of triglycerides and energy storage in muscle, heart and adipose tissues (PubMed:2762297, PubMed:29516132). By participating in the lipoprotein-mediated distribution of lipids among tissues, APOE plays a critical role in plasma and tissues lipid homeostasis (PubMed:1917954, PubMed:2762297, PubMed:29516132). APOE is also involved in two steps of reverse cholesterol transport, the HDLs-mediated transport of cholesterol from peripheral tissues to the liver, and thereby plays an important role in cholesterol homeostasis (PubMed:14754908, PubMed:23620513, PubMed:9395455). First, it is functionally associated with ABCA1 in the biogenesis of HDLs in tissues (PubMed:14754908, PubMed:23620513). Second, it is enriched in circulating HDLs and mediates their uptake by hepatocytes (PubMed:9395455). APOE also plays an important role in lipid transport in the central nervous system, regulating neuron survival and sprouting (PubMed:25173806, PubMed:8939961). APOE is also involved in innate and adaptive immune responses, controlling for instance the survival of myeloid-derived suppressor cells (By similarity). Binds to the immune cell receptor LILRB4 (PubMed:30333625). APOE may also play a role in transcription regulation through a receptor-dependent and cholesterol-independent mechanism, that activates MAP3K12 and a non-canonical MAPK signal transduction pathway that results in enhanced AP-1-mediated transcription of APP (PubMed:28111074);(Microbial infection) Through its interaction with HCV envelope glycoprotein E2, participates in the attachment of HCV to HSPGs and other receptors (LDLr, VLDLr, and SR-B1) on the cell surface and to the assembly, maturation and infectivity of HCV viral particles (PubMed:25122793, PubMed:29695434). This interaction is probably promoted via the up-regulation of cellular autophagy by the virus (PubMed:29695434)",
#         "associated_disease": [
#             33
#         ]
#     },



class DiseaseSerializer(serializers.ModelSerializer):
    associated_proteins = serializers.SerializerMethodField()

    class Meta:
        model = Disease
        fields =["pk", "disease_name", "description","patient_summary","associated_proteins"]

   
            
    def get_associated_proteins(self, obj):
    # Serialize the associated proteins for the given disease
        return ProteinSerializer(obj.associated_proteins.all(), many=True).data
    
    